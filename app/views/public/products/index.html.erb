<div class="container mt-5">
  <div class="row">
    <div class="col-lg-2">
      <%= render 'public/products/genre', genres: @genres %>
    </div>
    <div class="col-lg-10">
      <h4>商品一覧<span class="small"> (全<%= @products.count %>件)</span></h4>
      <div class="row row-cols-2 row-cols-md-4">
        <% @products.each do |product| %>
          <div class="col mb-4">
            <div class="card border-0">
              <%= link_to product_path(product) do %>
                 <% if product.image.attached? %>
                       <%= image_tag product.image, size: "150x150" %>
                  <% else %>
                        <%= image_tag 'no_image.jpg', size: "150x150" %>
                  <% end %>
                <div class="card-body">
                  <h5 class="card-title"><%= product.name %></h5>
                </div>
              <% end %>
              <div class="d-flex justify-content-between align-items-center">
                <span><%= number_to_currency(product.tax_excluded_price, unit: "¥", strip_insignificant_zeros: true) %></span>
                <span class="badge badge-<%= product.is_active ? "primary" : "danger" %> ml-2"> <%= product.is_active ? "In stock" : "Out of stock" %></span>
              </div>
            </div>
          </div>
        <% end %>
      </div>
      <div class="d-flex justify-content-center mt-3">
        <%= paginate @products %>
      </div>
    </div>
  </div>
</div>
